<html>
<head>
    <script type="application/javascript">
        function fetchAndDisplayQuotes() {
          fetchQuotes()
            .then(quotes => displayQuotes(quotes))
        }

        function fetchQuotes() {
          return fetch(
            "/quotes",
            { headers: { 'Accept': 'application/json' } }
          ).then(resp => resp.json());
        }

        function displayQuotes(quotes) {
          const tasksTableBody = document.getElementById("quotesTableBody");
          quotes.forEach(quote => {
            const newRow = quoteRow(quote);
            tasksTableBody.appendChild(newRow);
          });
        }

        function quoteRow(quote) {
          return tr([
            td(quote.id),
            td(quote.author),
            td(quote.source),
            td(quote.tags),
            td(quote.createdAt),
            td(quote.loggedBy)
          ]);
        }

        function tr(children) {
          const node = document.createElement("tr");
          children.forEach(child => node.appendChild(child));
          return node;
        }

        function td(text) {
          const node = document.createElement("td");
          node.appendChild(document.createTextNode(text));
          return node;
        }
    </script>
</head>
<body>
<h1>Viewing Quotes Via JS</h1>
<form action="javascript:fetchAndDisplayQuotes()">
    <input type="submit" value="View The Quote">
</form>
<table>
    <thead>
    <tr><th>Id</th><th>Author</th><th>Source</th><th>Tags</th><th>Created At</th><th>Logged By</th></tr>
    </thead>
    <tbody id="quotesTableBody">
    </tbody>
</table>
</body>
</html>
